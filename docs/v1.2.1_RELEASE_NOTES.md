# ROM Librarian v1.2.1 Release Notes

## Overview

v1.2.1 is a focused improvement release expanding the Compression Tab with 7z support, parity cleanup features, and replacing the 7z.exe dependency with a pure Python solution.

---

## New Features

### 7z Compression Support
The Compression Tab now supports 7z archives in addition to ZIP.

- Radio buttons to select **ZIP** or **7z** as the output format before compressing
- 7z generally achieves better compression ratios than ZIP
- No external tools required — powered by the `py7zr` Python library

### Compression Tab Parity
The right pane (archives) now mirrors the functionality of the left pane (uncompressed ROMs):

- **Status column** added to the archives list — archives are marked **"Extracted"** when their uncompressed counterpart exists in the folder
- **"Delete Extracted Only"** button — safely deletes archives that have already been extracted, leaving the ROM files untouched
- This mirrors the existing **"Delete Archived Only"** button on the left pane

### Archive Limitation Warnings
Added informational notes to the **Duplicates** and **Compare Collections** tabs clarifying that archives are compared as files (not by ROM content inside). Users are advised to extract first for accurate duplicate detection.

---

## Improvements

### CHD Conversion UX
- Large file conversion (e.g. PS2 ISOs) now shows file size and a time estimate warning for files over 500MB
- The chdman info note is now a subtle gray label rather than an orange warning that could be mistaken for an error

### Pure Python 7z (no 7z.exe required)
Previously the 7z feature required `7z.exe` to be installed or bundled. It now uses the `py7zr` Python library for both compression and extraction — no external executable needed, fully cross-platform.

---

## Technical Details

- Added `py7zr>=1.1.0` dependency (`requirements.txt`)
- Replaced `subprocess` + `shutil` 7z.exe calls with `py7zr.SevenZipFile`
- Extraction logic detects `.zip` vs `.7z` by extension and routes accordingly
- `_find_7z()` method removed — no longer needed

---

## Known Limitations

- CHD conversion still requires `chdman` (bundled on Windows; Linux users need it in PATH)
- CUE file encoding assumes UTF-8 (handles errors gracefully)
- Archives compared as files in Duplicates/Compare tabs — extract first for content-based comparison

---

**Previous Version:** v1.2.0
**Current Version:** v1.2.1
